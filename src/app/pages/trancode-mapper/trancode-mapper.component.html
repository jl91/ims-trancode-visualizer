<div class="page-container">
  <h1>IMS Trancoder Mapper</h1>

  <mat-divider></mat-divider>

  <div class="page-container_section">

    <div class="form-container">
      <form [formGroup]="baseForm">

        <mat-form-field class="form-item">
          <mat-label>
            IMS Transaction name
          </mat-label>
          <input matInput formControlName="trancodeName" type="text">
        </mat-form-field>

        <mat-divider></mat-divider>

        <div class="add-trancode-field">
          <button mat-raised-button matButton type="button" (click)="addTrancodeField($event)">
            <mat-icon>add</mat-icon>
            add trancode field
          </button>
        </div>

        <!-- <ng-container *ngIf="trancodeFields.length > 0"> -->
          <ng-container formArrayName="trancodeFields"
            *ngFor="let trancodeField of trancodeFields.controls; let i = index"
          >

              <div class="fields-container" [formGroupName]="i">

                <mat-form-field class="field-item">
                  <mat-label>
                    Field Name
                  </mat-label>
                  <input matInput formControlName="fieldName" type="text">
                </mat-form-field>

                <mat-form-field class="form-item">
                  <mat-label>
                    Field Size
                  </mat-label>
                  <input matInput formControlName="fieldSize" type="number">
                </mat-form-field>

              </div>

            </ng-container>
        <!-- </ng-container> -->

      </form>

      <mat-divider></mat-divider>

      <table mat-table [dataSource]="data" class="mat-elevation-z8">

        <!-- Position Column -->
        <ng-container *ngFor="let item of data">

          <ng-container [matColumnDef]="item.columnName">

            <th mat-header-cell *matHeaderCellDef>
              {{ item.columnName }}
            </th>

            <td mat-cell *matCellDef="let element">
              {{ item.columnValue }}
            </td>
          </ng-container>

      </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>

      </table>


    </div>


  </div>
</div>
